# =============================================================================
# Clarity API - 生产环境变量模板
# =============================================================================
# 使用说明：
# 1) 复制为 .env
# 2) 按 [必填]/[可选] 提示填写
# 3) 生产环境请妥善保管密钥
# =============================================================================

# -----------------------------------------------------------------------------
# 核心配置
# -----------------------------------------------------------------------------
# [必填] 生产环境必须为 false
DEBUG=false

# [必填] API 对外访问地址（用于回调/跳转/提示）
API_BASE_URL=https://api.example.com

# [必填] 前端/移动端 URL（用于密码重置链接等）
FRONTEND_URL=https://app.example.com

# [必填] PostgreSQL 连接字符串
# 格式: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://clarity_prod:9f2c8a1d7b3e4f5a6c8d0e1f2a3b4c5d@db:5432/clarity

# [必填] JWT 签名密钥（建议 openssl rand -hex 32）
JWT_SECRET=4c8f2b1a9d3e6f7a0b2c4d6e8f1a3b5c9d7e2f0a4b6c8d1e3f5a7b9c1d3e5f7a

# [可选] 服务监听地址（一般无需修改）
HOST=0.0.0.0
PORT=8000

# [可选] 应用版本号（健康检查展示）
APP_VERSION=1.0.0

# -----------------------------------------------------------------------------
# 免费 Beta 模式
# -----------------------------------------------------------------------------
# [可选] 免费 Beta 模式（放宽限制、跳过支付）
BETA_MODE=false

# [可选] 是否启用支付功能
PAYMENTS_ENABLED=true

# -----------------------------------------------------------------------------
# OAuth 配置
# -----------------------------------------------------------------------------
# [必填] Google OAuth Client ID
GOOGLE_CLIENT_ID=123456789012-abcd1234efgh5678ijkl9012mnop3456.apps.googleusercontent.com

# [必填] Apple Sign In Client ID（通常为 Bundle ID）
APPLE_CLIENT_ID=com.example.clarity

# -----------------------------------------------------------------------------
# LLM 配置
# -----------------------------------------------------------------------------
# [必填] 选择提供方: openai / anthropic / openrouter
LLM_PROVIDER=openai

# [必填] OpenAI API Key（当 LLM_PROVIDER=openai）
OPENAI_API_KEY=sk-live-1f2e3d4c5b6a7d8c9e0f1a2b3c4d5e6f

# [必填] Anthropic API Key（当 LLM_PROVIDER=anthropic）
ANTHROPIC_API_KEY=sk-ant-3a7f1b9c2d4e6f8a0b1c3d5e7f9a2c4e

# [必填] OpenRouter API Key（当 LLM_PROVIDER=openrouter）
OPENROUTER_API_KEY=sk-or-9b8a7c6d5e4f3a2b1c0d9e8f7a6b5c4d

# [可选] OpenRouter 额外配置
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_APP_NAME=Clarity
OPENROUTER_REFERER=https://example.com
# 当内容 token 为空时，是否允许推理 token 兜底
OPENROUTER_REASONING_FALLBACK=false

# [可选] 模型配置
LLM_MODEL=gpt-4o-mini
LLM_TIMEOUT=30
LLM_MAX_TOKENS=1024

# -----------------------------------------------------------------------------
# Stripe 配置（Web 订阅）
# -----------------------------------------------------------------------------
# [必填] Stripe Secret Key（从 Stripe Dashboard 获取）
STRIPE_SECRET_KEY=sk_live_REPLACE_WITH_YOUR_STRIPE_SECRET_KEY

# [必填] Stripe Webhook Secret
STRIPE_WEBHOOK_SECRET=whsec_7c9a1b3d5e7f9a0b2c4d6e8f0a1b3c5d

# [必填] Stripe Price IDs
STRIPE_PRICE_STANDARD=price_1P2a3B4c5D6e7F8g9H0i
STRIPE_PRICE_PRO=price_9H8g7F6e5D4c3B2a1P0i

# [必填] 结账跳转地址（生产环境务必为公网域名）
STRIPE_SUCCESS_URL=https://api.example.com/subscriptions/success?session_id={CHECKOUT_SESSION_ID}
STRIPE_CANCEL_URL=https://api.example.com/subscriptions/cancel

# -----------------------------------------------------------------------------
# RevenueCat 配置（移动端订阅）
# -----------------------------------------------------------------------------
# [必填] RevenueCat Webhook Secret
REVENUECAT_WEBHOOK_SECRET=whsec_2a4c6e8f0a1b3c5d7e9f1a2b3c4d5e6f

# [必填] RevenueCat Entitlement IDs
REVENUECAT_ENTITLEMENT_STANDARD=standard_access
REVENUECAT_ENTITLEMENT_PRO=pro_access

# -----------------------------------------------------------------------------
# 监控配置 (Sentry)
# -----------------------------------------------------------------------------
SENTRY_DSN=  # 在 sentry.io 创建项目后获取
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
